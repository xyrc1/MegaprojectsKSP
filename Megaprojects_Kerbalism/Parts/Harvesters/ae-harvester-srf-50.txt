// NEEDS KERBALISM AND RESTOCK 
// OTHERWISE WILL NOT FUNCTION AT ALL!!!!!
PART:NEEDS[ProfileDefault,Restock]
{
    name = ae-harvester-srf-50
    module = Part
    author = xyrc
    scale = 2.0
    rescaleFactor = 2.0
    TechRequired = advScienceTech
    entryCost = 180000
    cost = 60000
    category = Utility
    subcategory = 0
    title = 'Ware-Extractinator' M.N.C.H.R. 500
    // M Material
    // N Noming
    // C Clearly
    // H Handily
    // R Resourcefully
    manufacturer = Advanced Engineering
    description = Advanced Engineering's not repurposed Material Noming Clearly Handily & Resourcefully is a great tool for any planetary entrepreneur! Extracts crustal resources at an apalling rate! Warranty could probably have a 43.71% chance to be void when exposed to celestial surface elements.
    //
    attachRules = 1,1,1,0,0
    node_stack_top = 0.0, 0.75, 0.0, 0.0, 1.0, 0.0, 4
    node_stack_bottom = 0.0, -0.75, 0.0, 0.0, -1.0, 0.0, 4
    //
    mass = 34.0 // Mass of default ISRU * 8
    dragModelType = default
    angularDrag = 2
    crashTolerance = 7
    maxTemp = 2400
    tags = #autoLOC_500654 //#autoLOC_500654 = conver isru mine )mining (ore process resource
    //
    MODEL // Ripped from Restock
    {
        model = ReStock/Assets/Resource/restock-isru-25-1
        scale = 1.0, 1.0, 1.0
    }
    MODULE // Ripped from Restock
    {
        name = ModuleRestockISRUAnimation
        deployAnimationName = Deploy
        activeAnimationName = Run
        retractAnimationName = Retract
        needsEC = true
        waitForComplete = true
    }
    MODULE // Ripped from Restock; since in Kerbalism parts don't heat up you won't be able to see this ingame.
    {
        name = ModuleRestockHeatEffects
        enableHeatEmissive = true
        useCoreTemp = true
        shaderProperty = _EmissiveColor
        excludedRenderer = ISRU-25_heater
        lerpMax = 2700
        redCurve
        {
        key = 0 0 2 2
        key = 1 1 0 0
        }
        greenCurve
        {
        key = 0 0 1 1
        key = 1 1 1 1
        }
        blueCurve
        {
        key = 0 0 1 1
        key = 1 1 1 1
        }
        alphaCurve
        {
        key = 0 1 0 0
        key = 1 1 0 0
        }
        disableBlackbody = true
    }
// Rates are taken from the 7.5m as a baseline, multiplied by 1/3 and vaguely rounded
// ec_rate multipled by 1/3, so 100ec/s
// min_abundance reduced by 4x (same as 7.5m baseline)
// Default
    MODULE
    {
        name = Harvester
        title = #KERBALISM_WaterExcavation_title//Water Excavation
        type = 0 
        resource = Water
        min_abundance = 0.0025
        rate = 0.333
        abundance_rate = 0.1
        ec_rate = 100.0
    }
    MODULE
    {
        name = Harvester
        title = #KERBALISM_OreExcavation_title//Ore Excavation
        type = 0
        resource = Ore
        min_abundance = 0.005
        rate = 0.278
        ec_rate = 100.0
    }
    MODULE
    {
        name = Harvester
        title = #KERBALISM_NitrogenExcavation_title//Nitrogen Excavation
        type = 0
        resource = Nitrogen
        min_abundance = 0.005
        rate = 0.278
        ec_rate = 100.0
    }
// Important CRP
	MODULE
	{
		name = Harvester
		title = Hydrates Excavation
		type = 0
		resource = Hydrates
		min_abundance = 0.005
		rate = 0.278
		ec_rate = 100.0
	}
	MODULE:NEEDS[RationalResourcesELCRP] // If you want to enable anyway just remove ' :NEEDS[RationalResourcesELCRP] ' Also make sure to remove this later on
	{
		name = Harvester
		title = MetallicOre Excavation
		type = 0
		resource = MetallicOre
		min_abundance = 0.005
		rate = 0.278
		ec_rate = 100.0
	}
// Uraninite if NFE
	MODULE:NEEDS[NearFutureElectrical]
	{
		name = Harvester
		title = Uraninite Extraction
		type = 0
		resource = Uraninite
		min_abundance = 0.0125
		rate = 0.0275 // Default insanely low, increase if you want to
		ec_rate = 100.0
	}
// Configure, max amount 150
    MODULE
    {
        name = Configure
        title = Drill
        slots = 2 // Notably not 1
        SETUP
        {
            name = Water Extraction
            desc = #KERBALISM_WaterExcavation_desc//Extract <b>Water</b> from the surface.
            MODULE
            {
                type = Harvester
                id_field = resource
                id_value = Water
            }
            RESOURCE
            {
                name = Water
                amount = 0
                maxAmount = 150
        }
        }

        SETUP
        {
            name = Ore Extraction
            desc = #KERBALISM_OreExcavation_desc//Extract <b>Ore</b> from the surface.
            MODULE
            {
                type = Harvester
                id_field = resource
                id_value = Ore
            }
            RESOURCE
            {
                name = Ore
                amount = 0
                maxAmount = 150
            }
        }

        SETUP
        {
            name = Nitrogen Extraction
            desc = #KERBALISM_NitrogenExcavation_desc//Extract <b>Nitrogen</b> from the surface.
            MODULE
            {
                type = Harvester
                id_field = resource
                id_value = Nitrogen
            }
            RESOURCE
            {
                name = Nitrogen
                amount = 0
                maxAmount = 150
            }
        }
		SETUP
		{
			name = Hydrate Extraction
			desc = Extract <b>Hydrates</b> from the surface.
			MODULE
			{
				type = Harvester
				id_field = resource
				id_value = Hydrates
			}
			RESOURCE
			{
				name = Hydrates
				amount = 0
				maxAmount = 150
			}
		}
		SETUP:NEEDS[RationalResourcesELCRP] // If you want to enable anyway just remove ' :NEEDS[RationalResourcesELCRP] ' Also make sure to remove this earlier
		{
			name = MetallicOre Extraction
			desc = Extract <b>MetallicOre</b> from the surface.
			MODULE
			{
				type = Harvester
				id_field = resource
				id_value = MetallicOre
			}
			RESOURCE
			{
				name = MetallicOre
				amount = 0
				maxAmount = 150
			}
		}
        SETUP:NEEDS[NearFutureElectrical]
		{
			name = Uraninite Extraction
			desc = Extract <b>Uraninite</b> from the surface.
			MODULE
			{
				type = Harvester
				id_field = resource
				id_value = Uraninite
			}
			RESOURCE
			{
				name = Uraninite
				amount = 0
				maxAmount = 150
			}
		}
    }
    MODULE:NEEDS[FeatureReliability]
    {
        name = Reliability
        type = Harvester
        title = #KERBALISM_Harvester_title//Harvester
        repair = Engineer
        mtbf = 90720000 // 1.25x more cause you'll only use a few
        extra_cost = 1.0
        extra_mass = 0.2
    }
}
// Compatibility
@PART:HAS[#name[ae-harvester-srf-75]]:NEEDS[AngleCanMods/TETRIXTechTree]
{
    @TechRequired = actualizedActuators // Same as RR exosphere scoop and the biggest EPL parts
}